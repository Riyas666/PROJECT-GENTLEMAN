<%-include("../../views/partials/user/header")%>

    <!--=============== MAIN ===============-->

    <main class="main">
      <!--=============== BREADCRUMB ===============-->
      <section class="breadcrumb">

        <ul class="breadcrumb__list flex container">
          <li><a href="index.html" class="breadcrumb__link">Home</a></li>
          <li><span class="breadcrumb__link"></span>></li>
          <li><span class="breadcrumb__link">Shop</span></li>
        </ul>
      </section>

      <!--=============== PRODUCTS ===============-->
      <section class="products container section--lg">
        <p class="total__products">We found <span>688</span> items for you!</p>
        <div class="products__container grid">
          <%for(let i= 0 ; i < products.length; i++){%>
          <div class="product__item">
            <div class="product__banner">
              <a href="/productDetails?id=<%=products[i]._id%>" class="product__images">
                <img
                  src="/uploads/product-images/<%=products[i].productImage[0]%>"
                  alt="<%=products[i].productName%>"
                  class="product__img default"
                />
                <img
                  src="/uploads/product-images/<%=products[i].productImage[1]%>"
                  alt="<%=products[i].productName%>"
                  class="product__img hover"
                />
              </a>
              <div class="product__actions">
                <a href="#" class="action__btn" aria-label="Quick View">
                  <i class="fi fi-rs-eye"></i>
                </a>
                <a
                  href="/addToWishlist?id=<%products[i]._id%>"
                  class="action__btn"
                  aria-label="Add to Wishlist"
                >
                  <i class="fi fi-rs-heart"></i>
                </a>

                <!-- <a href="#" class="action__btn" aria-label="Compare">
                  <i class="fi fi-rs-shuffle"></i>
                </a> -->

              </div>
              <!-- <div class="product__badge light-pink">Hot</div> -->
            </div>
            <div class="product__content">
              <span class="product__category">Brand : <%=products[i].brand%></span>
              <a href="details.html">
                <h3 class="product__title"><%=products[i].productName%></h3>
              </a>
              <div class="product__rating">
                <i class="fi fi-rs-star"></i>
                <i class="fi fi-rs-star"></i>
                <i class="fi fi-rs-star"></i>
                <i class="fi fi-rs-star"></i>
                <i class="fi fi-rs-star"></i>
              </div>
              <div class="product__price flex">
                <span class="new__price"><%=products[i].salePrice.toLocaleString('en-IN')%></span>
                <span class="old__price"><%=products[i].regularPrice%></span>
              </div>
              <a
                href="/addToCart?id=<%=products[i]._id%>"
                class="action__btn cart__btn"
                aria-label="Add To Cart"
              >
                <i class="fi fi-rs-shopping-bag-add"></i>
              </a>
            </div>
          </div>
          <%}%>
         
        </div>
        <div class="container pagination-link mt-3">
          <nav aria-label="Page navigation">
            <ul class="pagination justify-content-center mb-20" style="margin-right: 200px;">
              
              <!-- Previous Button -->
              <li class="page-item <%= (currentPage === 1) ? 'disabled' : '' %>">
                <a class="page-link" href="?page=<%= currentPage - 1 %>" aria-label="Previous">
                  <span aria-hidden="true">&laquo;</span>
                </a>
              </li>
        
              <!-- First Page -->
              <% if (currentPage > 2) { %>
                <li class="page-item">
                  <a class="page-link" href="?page=1">1</a>
                </li>
                <% if (currentPage > 3) { %>
                  <li class="page-item disabled">
                    <span class="page-link">...</span>
                  </li>
                <% } %>
              <% } %>
        
              <!-- Current and Nearby Pages -->
              <% for (let i = Math.max(1, currentPage - 1); i <= Math.min(totalPages, currentPage + 1); i++) { %>
                <li class="page-item <%= (i === currentPage) ? 'active' : '' %>">
                  <a class="page-link" href="?page=<%= i %>"><%= i %></a>
                </li>
              <% } %>
        
              <!-- Last Page -->
              <% if (currentPage < totalPages - 1) { %>
                <% if (currentPage < totalPages - 2) { %>
                  <li class="page-item disabled">
                    <span class="page-link">...</span>
                  </li>
                <% } %>
                <li class="page-item">
                  <a class="page-link" href="?page=<%= totalPages %>"><%= totalPages %></a>
                </li>
              <% } %>
        
              <!-- Next Button -->
              <li class="page-item <%= (currentPage === totalPages) ? 'disabled' : '' %>">
                <a class="page-link" href="?page=<%= currentPage + 1 %>" aria-label="Next">
                  <span aria-hidden="true">&raquo;</span>
                </a>
              </li>
              
            </ul>
          </nav>
        </div>
      </section>
    </main>
    <%-include("../../views/partials/user/footer")%>
    <!--=============== SWIPER JS ===============-->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <!--=============== MAIN JS ===============-->
    <script src="/js/main.js"></script>
  